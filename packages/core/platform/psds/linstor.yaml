---
apiVersion: cozystack.io/v1alpha1
kind: PackageSetDefinition
metadata:
  name: cozystack.linstor
spec:
  sourceRef:
    kind: OCIRepository
    name: cozystack-packages
    namespace: cozy-system
    path: /
  variants:
    - name: default
      dependsOn:
        - cozystack.networking
        - cozystack.cert-manager
        - cozystack.monitoring
        - cozystack.reloader
      packages:
        - name: piraeus-operator
          path: system/piraeus-operator
          releaseName: piraeus-operator
          namespace: cozy-linstor
          dependsOn:
            - cert-manager
            - victoria-metrics-operator
        - name: linstor
          path: system/linstor
          releaseName: linstor
          namespace: cozy-linstor
          privileged: true
          dependsOn:
            - piraeus-operator
            - cert-manager
            - snapshot-controller

